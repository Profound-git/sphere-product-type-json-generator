language: node_js
node_js:
- '0.10'
- '0.12'
before_script:
- npm install -g grunt-cli
- gem install cucumber aruba
- ./create_config.sh
script:
- npm test
- cucumber -t ~@wip
- mkdir -p tmp && ./bin/product-type-generator --types data/sample-product-types.csv
  --attributes data/sample-product-types-attributes.csv --target ./tmp --zip
- mkdir -p tmp && ./bin/product-type-generator --types data/marketplace-types.csv
  --attributes data/marketplace-attributes.csv --target ./tmp --withRetailer --zip
- ./bin/product-type-update --projectKey ${SPHERE_PROJECT_KEY} --clientId ${SPHERE_CLIENT_ID}
  --clientSecret ${SPHERE_CLIENT_SECRET} --source ./tmp
notifications:
  hipchat:
    rooms:
    - secure: BbMUlILTPGhOX0ZBNqyCq0LpqwRNTOmuqv8gsg83LiDPy4SI/YsjAOQLlrbnoXLECAQMfRBwnED1XVJnskgJbj/VFL+q0hAa0GWfp8gLj7PAv40TYM7+pj6KDxJMWh3ZMWrQ2ixNRAjbuGnP2AfL0Gn6hj6NaxFwyIGQrb7sHKo=
    template:
    - '%{repository}#%{build_number} (%{author}): %{message} (<a href="%{build_url}">Details</a>/<a
      href="%{compare_url}">Compare</a>)'
    format: html
    on_success: change
    on_failure: change
env:
  global:
  - secure: iytO3AZ1pOvuZ8Mb6F6WqNjFnbxWw5yfadrnN5z43jK+23/YKS04bvcExJJ095L7t9IX9Jes2YfH1nbUm/f0oys3l1K40MDTDP7JvG39AfTHxLezUTrNKLryCI/FbuvIcA3BX1x2KH9FuRO1kmz5zaDQ0paNnn8z1MHU2PqizR0=
  - secure: xLnUGu/seODIJyTjvNCSrsAbWLxGQFBxtw0haTmpKj8fRYyCnmut4qP8ILKrzevYZY+GtaygvLxRlyXlwAD+9VOXHiWxUkirDr69/MXDKFv65O2t04dGSCmmUZ9s0JaajVQKCCU5N81warQhSpZpsGYOf4i8t8xWOv61ATbJJTE=
  - secure: e7tqEBDvBH/wHoJTlSoklWCepXim25jQoRM9dLb/Infk8NSTpaX5qq1gBrUwHp4rP5GDxHZdb80O3m/fh7e/3lfHobd2x7XeQnzp03hplkcXQXNsC3l5oHoKkkNqz7PdBvZh08TEPNbPWUnKMZXFx1Sq1fzWPNVi0HHj9JVvORY=
